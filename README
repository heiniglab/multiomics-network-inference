First preprocess data. (call in R...)
```{r}
library(rmarkdown)
render("0-preprocess.Rmd")
```

Calculate GGMs:
```{bash}
Rscript R/1-apply-ggm_batch.R

# check which ggm calculations have failed
odir="results/current/fits/"
for i in $odir/*.out ; do echo $i ; tail -n 1 $i | grep angehalten ; done | \
                          grep angehalten -B1 | grep rs | cut -f 1 -d "." > $odir/failed.txt

# call again for failed runs
Rscript R/1-apply-ggm_batch.R $odir/failed.txt
```

Perform validation
```{bash}
Rscript R/2-validate-ggm_batch.R 
```

summarize validation results into one table:
```{bash}
# remove outputs of failed runs...
odir="results/current/validation"
for i in $odir/*.validation.out ; do echo $i ; cat $i | tail -n 20 | grep Execution ; done | grep Execution -A0 -B1
while read p ; do rm $odir/$p.validation.txt ; done < $odir/failed.validation.txt

cat $odir/*.validation.txt | sort | uniq | sort -r > results/current/validation.summary.txt

```

Display the validation results in a neat RMarkdown document
```{r}
library(rmarkdown)
render("3-render-validation.Rmd")
```
